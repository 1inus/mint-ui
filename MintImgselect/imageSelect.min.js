!function(){var e=$("script").last().attr("src");$("head:first").append($('<link rel="stylesheet"/>').attr("href",e.replace(e.substring(e.lastIndexOf("/")+1),"css/style.css")))}(),function(){$.fn.MintImgSelect=function(e){function t(){var t=B.position();D=t.top+parseInt(B.css("padding-top"))+parseInt(B.css("margin-top")),z=t.left+parseInt(B.css("padding-left"))+parseInt(B.css("margin-left")),l=B.width(),a=B.height(),k.css({top:D,left:z,width:l,height:a});var s=new Image,n=B.attr("src");s.src=n,f=s.height,h=s.width,d=a/f,p=l/h,M.length>0&&M.html($("<img/>").attr("src",n)).each(function(e,t){O[e].img=$(t).find("img")});var o=e.scope;o&&o.left+o.width<=l&&o.top+o.height<=a&&(!e.ratio||o.width/o.height==e.ratio)&&(D=o.top,z=o.left,X=a-o.height,C=l-o.width,_.css("opacity",".5"),S.css("display","block"),i())}function i(){S.css({top:D,right:C,bottom:X,left:z}),_.css("border-width",D+"px "+C+"px "+X+"px "+z+"px");var t={top:I(D/d),left:I(z/p),width:I((l-z-C)/p),height:I((a-D-X)/d)};e.onSelect({top:D,left:z,width:l-z-C,height:a-D-X},t),s(t)}function s(e){0!=e.height&&0!=e.width&&$.each(O,function(t,i){var s=i.h/e.height,n=i.w/e.width,o=I(e.top*s),r=I(e.left*n),c=I(f*s),a=I(h*n);i.img.css({width:a,height:c,"margin-top":-o,"margin-left":-r})})}function n(e){u=e.clientY-r,m=e.clientX-c,D=v+u,z=A+m,C=w-m,X=b-u,0>D?(D=0,X=b+v):0>X&&(D=v+b,X=0),0>z?(z=0,C=w+A):0>C&&(z=A+w,C=0),i()}function o(e){if(u=e.clientY-r,m=e.clientX-c,1&Y){if(q=-u,D=v+u,0>D)D=0,q=v;else if(D+X>a){if(r+=a-b-v,H){D=v=a-b;var t=l-A-w;2&Y||y?(C=w=l-A,c-=t):(z=A=l-w,c+=t),m=e.clientX-c}else D=a-X;F=14&Y|4}}else if(4&Y)if(q=u,X=b-u,0>X)X=0,q=b;else if(X+D>a){if(r-=a-b-v,H){X=b=a-v;var t=l-A-w;2&Y||y?(C=w=l-A,c-=t):(z=A=l-w,c-=t),m=e.clientX-c}else X=a-D;F=11&Y|1}if(2&Y){if(j=m,C=w-m,0>C)C=0,j=w;else if(C+z>l){if(c-=l-A-w,H){C=w=l-A;var s=a-v-b;4&Y||y?(X=b=a-v,r-=s,q=e.clientY-r,j=e.clientX-c,X=b-q):(D=v=a-b,r+=s,q=r-e.clientY,j=c-e.clientX,D=v-q)}else C=l-z;F=13&Y|8}}else if(8&Y)if(j=-m,z=A+m,0>z)z=0,j=A;else if(z+C>l){if(c+=l-w-A,H){z=A=l-w;var s=a-v-b;4&Y||y?(X=b=a-v,r-=s,q=e.clientY-r,X=b-q):(D=v=a-b,r+=s,q=r-e.clientY,D=v-q)}else z=l-C;F=7&Y|2}Y=F,H&&(1&Y?(q*H>=j||y)&&(2&Y||y?(C=w-I(q*H),0>C&&(D=v-I(w/H),C=0)):(z=A-I(q*H),0>z&&(D=v-I(A/H),z=0))):4&Y&&(q*H>=j||y)&&(2&Y||y?(C=w-I(q*H),0>C&&(X=b-I(w/H),C=0)):(z=A-I(q*H),0>z&&(X=b-I(A/H),z=0))),2&Y?(j>q*H||y)&&(4&Y||y?(X=b-I(j/H),0>X&&(C=w-I(b*H),X=0)):(D=v-I(j/H),0>D&&(C=w-I(v*H),D=0))):8&Y&&(j>q*H||y)&&(4&Y||y?(X=b-I(j/H),0>X&&(z=A-I(b*H),X=0)):(D=v-I(j/H),0>D&&(z=A-I(v*H),D=0)))),i()}e=$.extend({onSelect:$.noop,onEnd:$.noop},e);var r,c,a,l,f,h,d,p,g,m,u,v,w,b,A,D,z,C,X,Y,y,x=Math,I=(x.abs,x.ceil,x.max,x.min,x.round),k=$('<div class="select_tool" onselectstart="return false">AcoverDAmaskDApane">AB0DAB1DAB2DAB3DAC0DAC1DAC2DAC3DAC4DAC5DAC6DAC7D</i></div>'.replace(/A/g,'<i class="').replace(/B/g,"border border").replace(/C/g,"resize resize").replace(/D/g,'"></i>')),B=$(this),_=k.find(".cover"),S=k.find(".pane"),E=$(document),H=e.ratio,M=$(e.preview),W=!1,O=[];M.each(function(e,t){t=$(t),O.push({h:t.height(),w:t.width()}),W=!0}).addClass("mint_imgselect_preview"),B.attr("src")&&t(),B.after(k).on("load",function(){t()}),k.find(".mask").mousedown(function(e){var t=_.css("opacity",".5").offset();D=v=e.offsetY?e.offsetY:e.clientY-t.top,z=A=e.offsetX?e.offsetX:e.clientX-t.left,C=w=l-A,X=b=a-v,i(),S.css("display","block").addClass("no_resize"),F=Y=6,E.bind("mousemove",o)}),k.mousedown(function(e){return g=!0,r=e.clientY,c=e.clientX,!1}).on("dragstart",function(){return!1}),S.mousedown(function(e){var t=$(e.target),i=S.position();D=v=i.top,z=A=i.left,C=w=l-A-S.width(),X=b=a-v-S.height(),t.is(".pane")?k.bind("mousemove",n):(t.is(".resize0,.border0")?(Y=1,y=1):t.is(".resize1")?Y=3:t.is(".resize2,.border1")?(Y=2,y=1):t.is(".resize3")?Y=6:t.is(".resize4,.border2")?(Y=4,y=1):t.is(".resize5")?Y=12:t.is(".resize6,.border3")?(Y=8,y=1):t.is(".resize7")&&(Y=9),F=Y,E.bind("mousemove",o))}),E.mouseup(function(){g&&(g=!1,y=0,k.unbind("mousemove",n),E.unbind("mousemove",o),S.removeClass("no_resize"),S.height()*S.width()==0&&(_.css({opacity:"0",filter:"alpha(opacity=0)"}),S.css("display","none")),e.onEnd({top:D,left:z,width:l-z-C,height:a-D-X,imgHeight:a,imgWidth:l},{top:I(D/d),left:I(z/p),width:I((l-z-C)/p),height:I((a-D-X)/d),imgHeight:f,imgWidth:h}))});var D,z,C,X,j,q,F}}($);